#
# /etc/snmp/snmpd.conf
# 
# Generated by Chef for <%= @node[:fqdn] %>
#

####
# First, map the community name (COMMUNITY) into a security name
# (local and mynetwork, depending on where the request is coming
# from):

#           sec.name    source          community
# com2sec   paranoid    default         public
# com2sec   readonly    default         public
# com2sec   readwrite   default         private
com2sec     mom         localhost       <%= @community_string %>
com2sec     mom         <%= @source_ip %>     <%= @community_string %>

####
# Second, map the security names into group names:

#             	sec.model  sec.name
group MyROSystem v1        paranoid
group MyROSystem v2c       paranoid
group MyROSystem usm       paranoid
group MyROGroup v1         readonly
group MyROGroup v2c        readonly
group MyROGroup usm        readonly
group MomGroup v1          mom
group MomGroup v2c         mom
group MomGroup usm         mom
group MyRWGroup v1         readwrite
group MyRWGroup v2c        readwrite
group MyRWGroup usm        readwrite

####
# Third, create a view for us to let the groups have rights to:

#           incl/excl subtree                          mask
view all    included  .1                               80
view system included  .1.3.6.1.2.1.1
#view system included  .iso.org.dod.internet.mgmt.mib-2.system

####
# Finally, grant the 2 groups access to the 1 view with different
# write permissions:

#                context sec.model sec.level match  read   write  notif
access MyROSystem ""     any       noauth    exact  system none   none
access MyROGroup ""      any       noauth    exact  all    none   none
access MomGroup  ""      any       noauth    exact  all    none   none
access MyRWGroup ""      any       noauth    exact  all    all    none

####
# System contact information

syslocation <%= @syslocation %>
syscontact <%= @syscontact %>
